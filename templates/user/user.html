{% extends 'base.html' %}
{% load static formatting %}

{% block content %}
<div class="container my-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold text-blue">Search Filters</h2>
  </div>

  <form method="GET" action="">
    <div class="row g-4">
      <!-- Location Filter -->
      <div class="col-md-6">
        <label class="form-label fw-semibold">Location</label>
        <button type="button" class="btn btn-light w-100 d-flex align-items-center justify-content-start gap-2" data-bs-toggle="collapse" data-bs-target="#locationDropdown">
          <img src="{% static 'icons/location.png' %}" alt="Location icon"> Choose a location
        </button>
        <div id="locationDropdown" class="collapse mt-2 bg-white p-3 rounded shadow-sm">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="location" value="101" id="location-101" {% if '101' in request.GET.location %}checked{% endif %}>
            <label class="form-check-label" for="location-101">101 - Miðbær</label>
          </div>
          <!-- Add more locations here -->
        </div>
      </div>

      <!-- Type Filter -->
      <div class="col-md-6">
        <label class="form-label fw-semibold">Type</label>
        <div class="bg-white p-3 rounded shadow-sm">
          {% for value, label in type_choices %}
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="type" value="{{ value }}" id="type-{{ value }}" {% if value in request.GET.type %}checked{% endif %}>
              <label class="form-check-label" for="type-{{ value }}">{{ label }}</label>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- Size Filter -->
      <div class="col-md-6">
        <label class="form-label fw-semibold">Size (m²)</label>
        <div class="d-flex gap-2">
          <select name="size_from" class="form-select">
            <option value="">From</option>
            {% for size in size_choices %}
              <option value="{{ size }}" {% if request.GET.size_from == size %}selected{% endif %}>{{ size }} m²</option>
            {% endfor %}
          </select>
          <select name="size_to" class="form-select">
            <option value="">To</option>
            {% for size in size_choices %}
              <option value="{{ size }}" {% if request.GET.size_to == size %}selected{% endif %}>{{ size }} m²</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Rooms Filter -->
      <div class="col-md-6">
        <label class="form-label fw-semibold">Rooms</label>
        <div class="bg-white p-3 rounded shadow-sm">
          <label class="form-label">Bedrooms</label>
          <div class="d-flex gap-2 flex-wrap">
            {% for val in room_choices %}
              <input type="radio" class="btn-check" name="bedrooms" value="{{ val }}" id="bedrooms-{{ val }}" {% if request.GET.bedrooms == val %}checked{% endif %}>
              <label class="btn btn-outline-primary" for="bedrooms-{{ val }}">{{ val }}+</label>
            {% endfor %}
          </div>
          <label class="form-label mt-3">Bathrooms</label>
          <div class="d-flex gap-2 flex-wrap">
            {% for val in room_choices %}
              <input type="radio" class="btn-check" name="bathrooms" value="{{ val }}" id="bathrooms-{{ val }}" {% if request.GET.bathrooms == val %}checked{% endif %}>
              <label class="btn btn-outline-primary" for="bathrooms-{{ val }}">{{ val }}+</label>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Price Filter -->
      <div class="col-md-6">
        <label class="form-label fw-semibold">Price (ISK)</label>
        <div class="d-flex gap-2">
          <select name="price_from" class="form-select">
            <option value="">From</option>
            {% for val in price_choices %}
              <option value="{{ val }}" {% if request.GET.price_from == val %}selected{% endif %}>{{ val|intdot }} ISK</option>
            {% endfor %}
          </select>
          <select name="price_to" class="form-select">
            <option value="">To</option>
            {% for val in price_choices %}
              <option value="{{ val }}" {% if request.GET.price_to == val %}selected{% endif %}>{{ val|intdot }} ISK</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Text Query -->
      <div class="col-md-6">
        <label class="form-label fw-semibold">Street name or text description</label>
        <input type="text" name="q" class="form-control" placeholder="Write here..." value="{{ request.GET.q }}">
      </div>

      <!-- Submit -->
      <div class="col-12 text-center">
        <button type="submit" class="btn btn-primary px-5 py-2 rounded-pill fw-semibold">
          <img src="{% static 'icons/search.png' %}" alt="Search icon" class="me-2"> SEARCH
        </button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
